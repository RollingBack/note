=====================
代码风格指南
=====================

---------------------------
代码规范
---------------------------

----------------
总则
----------------

1. DRY. Do not repeat youself.

2. Simple is better than complex.

----------------------------
PHP代码规范
----------------------------
-----------------
1. 文件命名
-----------------

1. 类文件使用类名命名。例如 TypoException.php。

.. code-block:: php

	<?php
		class TypoException {

		}

2. 模板文件使用小写加下划线。例如 home_layout.blade.php。

3. 所有php源文件必须带有.php扩展名.(Linux系统下可以在头部定义文件执行环境, 例如#!/usr/bin/php 从而使文件可以随便命名.你甚至可以把你的
文件命名为.sh或者.py, 当然这样做在命令行环境下不会有什么问题,但对于CGI环境下的网站而言, 这样做会引起不必要的麻烦,比如Apache不解析你的PHP
文件等)

---------------
2. 文件编码
---------------

源代码使用UTF-8编码,不允许带BOM头.使用Windows系统的开发环境的同学一定要注意不要把文件编码定义为GBK.

--------------------------------------------------
3. 缩进风格
--------------------------------------------------

1. 使用花括号时使用K&R或者Allman风格的缩进, 使用4个空格.

.. code-block:: c

    //K&R style
    while (x == y) {
        something();
        somethingelse();
    }

    //Allman style
    while (x == y)
    {
        something();
        somethingelse();
    }

2. 不使用花括号时, 使用替代语法并参考Python, PEP8进行缩进, 使用4个空格.

.. code-block:: php

    <?php

        foreach($lines as $eachLine):
            echo $eachLine;
        endforeach;

---------------------------------------------------
4. 行长度限制
---------------------------------------------------

1. 一行一句代码.不要一句中包含多行代码.

.. code-block:: php

    <?php

        $a = 1; $b = 2;

2. 不长于80字符.超过80字符需要折行.折行点在操作符后面, 必要时加上圆括号.

.. code-block:: php

    <?php

        $this->view_data['shareLink'] = url('/marketing/show-result').'?action=share&fake_id='.
                                            Session::get('fake_id').'&nickname='.urlencode($nickName);



-----------------------------------------------------
5. 命名规范
-----------------------------------------------------

1. 类名使用CapsWord命名方式, 异常名使用CapsWordException命名方式.

2. 常量使用全部大写方式, 可以用下划线, 不要使用混合数字.

3. 类中属性使用小写和下划线.

4. 类中的方法可以遵从驼峰命名方式, 或者Python的全小写加下划线方式.

5. 类中方法必须定义作用域.

6. 因为PHP4的历史原因, 类中同名的方法会被当成构造函数, 使用__construct(), 不使用同名方法.

7. PHP魔术方法都是双下划线开头, 不要把自己写的方法命名为双下划线开头.

-----------------------------------------------------
6. 已经废弃的语法或者即将废弃的语法
-----------------------------------------------------

1. ASP风格的PHP标签. 同时不推荐使用短标签.

---------------------------
SQL规范
---------------------------

1. 不要选取表的所有字段, 即select * .

.. code-block:: sql

    select * from users;

2. 缩进方案, 如果代码中出现SQL语句.要适当缩进, 避免代码混乱, 同时便于添加修改.

.. code-block:: sql

    select id,
        name,
        email
    from users
    group by group_id
    order by id desc

3. 记得建立索引.

4. 如果使用主从库, 不要往从库里写数据.

